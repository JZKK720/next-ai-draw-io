services:
  drawio:
    image: jgraph/drawio:latest
    ports:
      - "8231:8080"
    restart: unless-stopped

  next-ai-draw-io:
    build:
      context: .
      args:
        - NEXT_PUBLIC_DRAWIO_BASE_URL=http://localhost:8231
        # Uncomment below for subdirectory deployment
        # - NEXT_PUBLIC_BASE_PATH=/nextaidrawio
    ports: ["3201:3000"]
    env_file: .env
    # environment:
    #   # For subdirectory deployment, uncomment and set your path:
    #   NEXT_PUBLIC_BASE_PATH: /nextaidrawio
    depends_on: [drawio]
